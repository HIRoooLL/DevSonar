# ğŸš€ DevSonar ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

## æœ€é€Ÿã§è©¦ã™ï¼ˆDockerä½¿ç”¨ï¼‰

```bash
# 1. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œï¼ˆ.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼‰
./setup.sh

# 2. Docker Composeã§èµ·å‹•
docker-compose up -d

# 3. ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
open http://localhost:3000
```

**ã“ã‚Œã ã‘ã§OKï¼** ä»¥ä¸‹ã®URLãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ï¼š

- ğŸ“± **Frontend**: http://localhost:3000
- ğŸ”Œ **Backend API**: http://localhost:3001
- ğŸ“¡ **Relay Server**: http://localhost:9100

## ã‚¨ãƒ©ãƒ¼é€ä¿¡ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

### æ–¹æ³•1: UIã‹ã‚‰ï¼ˆç°¡å˜ï¼‰

1. http://localhost:3000 ã‚’é–‹ã
2. ç”»é¢ä¸Šéƒ¨ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼š
   - **ğŸ”¥ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ** â†’ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã‚‹
   - **ğŸ’¥ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ** â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã‚‹

### æ–¹æ³•2: curlã§ç›´æ¥é€ä¿¡

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿ
curl http://localhost:3001/api/error

# ä¸­ç¶™ã‚µãƒ¼ãƒãƒ¼ã«ç›´æ¥ã‚¨ãƒ©ãƒ¼ã‚’é€ä¿¡
curl -X POST http://localhost:9100/errors \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Test error from curl",
    "source": "Manual test",
    "timestamp": "'$(date -u +"%Y-%m-%dT%H:%M:%SZ")'"
  }'

# ãƒãƒƒãƒ•ã‚¡çŠ¶æ…‹ã‚’ç¢ºèª
curl http://localhost:9100/health

# å¼·åˆ¶ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆå³åº§ã«Claude Code CLIã«é€ä¿¡ï¼‰
curl -X POST http://localhost:9100/flush
```

## ã‚¨ãƒ©ãƒ¼é€ä¿¡ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿâ”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error Reporter      â”‚  fire-and-forget
â”‚ (middleware/hook)   â”‚  POST /errors
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Relay Server        â”‚
â”‚ - Buffer (3ç§’)      â”‚  ãƒ‡ãƒã‚¦ãƒ³ã‚¹å¾Œ
â”‚ - Debounce          â”‚  ä¸€æ‹¬é€ä¿¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude Code CLI     â”‚
â”‚ `claude -p <prompt>`â”‚
â”‚ - ã‚¨ãƒ©ãƒ¼è§£æ         â”‚
â”‚ - åŸå› ç‰¹å®š           â”‚
â”‚ - ä¿®æ­£æ¡ˆææ¡ˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Claude Code CLIã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

æ—¢å­˜ã®Claude Code CLIã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ã‚¨ãƒ©ãƒ¼ã‚’é€ä¿¡ã—ãŸã„å ´åˆï¼š

```bash
# 1. Claude Code CLIã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
claude

# 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’ç¢ºèªï¼ˆé€šå¸¸ ~/.claude/sessions/ ã«ä¿å­˜ã•ã‚Œã‚‹ï¼‰
ls ~/.claude/sessions/

# 3. apps/relay-server/.env ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’è¨­å®š
echo "CLAUDE_SESSION_ID=your-session-id" >> apps/relay-server/.env

# 4. ä¸­ç¶™ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•
docker-compose restart relay-server
```

### OpenHandsã‚’ä½¿ã†å ´åˆ

```bash
# apps/relay-server/.env ã‚’ç·¨é›†
RELAY_TARGET=open-hands
OPEN_HANDS_API_URL=http://localhost:3000

# å†èµ·å‹•
docker-compose restart relay-server
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼ãŒé€ä¿¡ã•ã‚Œãªã„

```bash
# 1. å„ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã‚’ç¢ºèª
docker-compose logs -f

# 2. ä¸­ç¶™ã‚µãƒ¼ãƒãƒ¼ã®çŠ¶æ…‹ç¢ºèª
curl http://localhost:9100/health

# 3. Claude Code CLIãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª
claude --version
```

### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­

```bash
# ãƒãƒ¼ãƒˆã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯ docker-compose.yml ã‚’ç·¨é›†
# ä¾‹: frontend ã‚’ 8080 ã«å¤‰æ›´
ports:
  - "8080:80"  # å…ƒã¯ "3000:80"
```

## åœæ­¢ãƒ»å‰Šé™¤

```bash
# åœæ­¢
docker-compose down

# å®Œå…¨å‰Šé™¤ï¼ˆã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»ãƒœãƒªãƒ¥ãƒ¼ãƒ å«ã‚€ï¼‰
docker-compose down -v --rmi all
```
